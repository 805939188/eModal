/* ========================================================================
 * SaRibe: eModal.js v1.2.0-rc1
 * http://saribe.github.io/eModal
 * ========================================================================
 * Copyright Samuel Ribeiro.
 * Licensed under MIT.
 * ======================================================================== */
(function(n){n(["jquery"],function(n){function tt(n){return t.find(".modal-content").append(n),t.modal(g),e}function o(n){return typeof n=="function"}function it(){function i(){return n('<div class="modal fade" tabindex="-1"><div class=modal-dialog><div class=modal-content> <div class=modal-header><button type=button class="x close" data-dismiss=modal><span aria-hidden=true>&times;<\/span><span class=sr-only>Close<\/span><\/button><h4 class=modal-title><\/h4><\/div><\/div><\/div><\/div>').on("hidden.bs.modal",k).on("click","button.x",function(i){var r=n(i.currentTarget);if(r.prop("type")!=="submit")return t.modal("hide");try{if(r.closest("form")[0].checkValidity())return f()}catch(u){return f()}return t})}return t||(document.getElementById(h)||n("body").append(n(c).prop("id",h).hide()),t=i(),e.element=t),t}function b(t){var f,e,o,i,u,r;if(t===!1)return"";if(f=n(c).addClass("modal-footer").prop("id",yt),t)for(e=0,o=t.length;e<o;e++){i=t[e];u=n("<button>").addClass("btn btn-"+(i.style||"info"));for(r in i)if(i.hasOwnProperty(r))switch(r){case"close":i[r]&&u.attr("data-dismiss","modal").addClass("x");break;case"click":u.click(i.click);break;case"text":u.html(i[r]);break;default:u.attr(r,i[r])}f.append(u)}else f.append('<button class="x btn btn-info" data-dismiss=modal type=button>Close<\/button>');return f}function rt(t){var r,u=t.loading?i.loadingHtml:t.message||t;return u.on||u.onclick?(r=t.clone===!0?n(u).clone():n(u),r.addClass(t.useBin&&!t.loading?p:pt)):r=n(c).addClass(y).html(u),t.css&&t.css!==r.css&&r.css(t.css),r}function k(){if(!t)return t;var n=t.find("."+p).removeClass(p).appendTo("#"+h);return t.off(v).off(w).find(".modal-content > div:not(:first-child)").remove(),(!i.allowContentRecycle||d.clone)&&n.remove(),t}function ut(t,r){if(!t)throw new Error("Invalid parameters!");k();d=t;var u=it();u.find(".modal-dialog").removeClass("modal-sm modal-lg").addClass(t.size?"modal-"+t.size:i.size);u.find(".modal-title").html((t.title||r||i.title)+" ").append(n("<small>").html(t.subtitle||""));u.on(v,t.onHide);return u}function ft(f,o){function c(n,i){var u=i==="error",f;t.on(w,u?s:r);u&&(f='<div class="alert alert-danger"><strong>XHR Fail: <\/strong>Url [ '+h.url+"] load fail.<\/div>",t.find("."+y).html(f))}var h={async:!0,loading:!0,title:f.title||o||i.title,url:f.url||f};return f.url&&n.extend(h,f),u(h,o).element.find("."+y).load(h.url,c),e}function u(i,u){ut(i,u);var f=n(c).append(rt(i),b(i.buttons));if(tt(f,i),!i.async)t.on(w,r);return e}function et(t,i){function o(t){f();var i=n(t.currentTarget).html();return e[i]?r():s()}var e={OK:"Cancel",True:"False",Yes:"No"},h="OK";return u({async:!0,buttons:[{close:!0,click:o,text:e[t.label]?e[t.label]:e[h],style:"danger"},{close:!0,click:o,text:e[t.label]?t.label:h}],message:t.message||t,onHide:o,size:t.size,title:t.title||i})}function ot(t,f){function e(){return n(this).parent().find("div").fadeOut(function(){n(this).remove()}),r()}var o='<div class=modal-body style="position: absolute;width: 100%;background-color: rgba(255,255,255,0.8);height: 100%;">%1%<\/div><iframe class="embed-responsive-item" src="%0%" style="width:100%;height:75vh;"/>'.replace("%0%",t.message||t.url||t).replace("%1%",i.loadingHtml),s=n(o).load(e);return u({async:!0,buttons:t.buttons||!1,message:s,size:t.size||nt.lg,title:t.title||f})}function st(){return n("#"+h+" > *").remove()}function ht(i,e){function l(i){var u=t.find("input").val();return f(),n(i.currentTarget).html()==="Cancel"?s(u):r(u)}var o={},h,c,a,v;if(typeof i=="object"?n.extend(o,i):(o.message=i,o.title=e),o.buttons)for(c=0,a=o.buttons.length;c<a;c++)h=o.buttons[c],h.style=(h.style||"default")+" pull-left",h.type=h.type||"button";return v=b([{close:!0,type:"reset",text:"Cancel",style:"danger"},{close:!1,type:"submit",text:"OK"}].concat(o.buttons||[])),o.buttons=!1,o.onHide=l,o.message=n('<form role=form style="margin-bottom:0;"><div class=modal-body><label for=prompt-input class=control-label>'+(o.message||"")+'<\/label><input type=text class=form-control id=prompt-input required autofocus value="'+(o.value||"")+(o.pattern?'" pattern="'+o.pattern:"")+'"><\/div><\/form>').append(v).on("submit",l),u(o)}function ct(t){return n.extend(i,t)}function lt(i){return t&&t.remove(),n.extend(g,i)}function f(){return t&&t.off(v).modal("hide"),t}function at(n){o(n)&&(l=n)}function vt(n,t){if(o(n)){var i={error:t,success:n};a.push(i)}return e}function r(n){var i=a.shift(),u;if(i)try{return u=i.success(n||t),r(u)}catch(f){s(f,i)}return n}function s(n,t){t||(t=a.shift());a.length=0;t&&o(t.error)&&t.error(n);o(l)&&(l(n),l=null)}var i={allowContentRecycle:!0,size:"",loadingHtml:'<h5>Loading...<\/h5><div class=progress><div class="progress-bar progress-bar-striped active" role=progressbar aria-valuenow=100 aria-valuemin=0 aria-valuemax=100 style="width: 100%"><span class=sr-only>100% Complete<\/span><\/div><\/div>',title:"Attention"},t,h="recycle-bin",c='<div style="position:relative;word-wrap:break-word;">',yt="eModalFooter",v="hide.bs.modal",d={},y="modal-body",g={},p="rec-modal-content",nt={sm:"sm",lg:"lg"},w="shown.bs.modal",pt="tmp-modal-content",l,a=[],e={element:t,"catch":at,then:vt};return{ajax:ft,alert:u,close:f,confirm:et,emptyBin:st,iframe:ot,prompt:ht,setEModalOptions:ct,setModalOptions:lt,size:nt,version:"1.1.03"}})})(typeof define=="function"&&define.amd?define:function(n,t){typeof module!="undefined"&&window.module.exports?window.module.exports=t(window.require(n[0])):window.eModal=t(window.jQuery)});